"0","# Convertir los nombres a un formato estándar para asegurarse de que coincidan"
"0","df_2021$Nacionalidad <- countrycode(df_2021$Nacionalidad, origin = ""country.name"", destination = ""country.name"")"
"0",""
"0","# Obtener los datos de países con la columna `geometry`"
"0","countries <- rnaturalearth::ne_countries(scale = ""medium"", returnclass = ""sf"") %>%"
"0","  select(name, geometry)"
"0",""
"0","# Calcular los centroides de los países y extraer latitud y longitud"
"0","countries <- countries %>%"
"0","  mutate(centroid = st_centroid(geometry)) %>%                   # Calcular el centroide"
"0","  mutate(latitude = st_coordinates(centroid)[, 2],               # Extraer latitud"
"0","         longitude = st_coordinates(centroid)[, 1]) %>%          # Extraer longitud"
"0","  select(name, latitude, longitude)                              # Seleccionar solo las columnas necesarias"
"0",""
"0","# Unir el dataframe `df_2021` con los datos de coordenadas, evitando duplicados"
"0","df_2021 <- df_2021 %>%"
"0","  left_join(countries, by = c(""Nacionalidad"" = ""name""))"
"0",""
"0",""
"0","df_2021$geometry <- NULL"
"0","# Verificar el resultado"
"0","head(df_2021)"
